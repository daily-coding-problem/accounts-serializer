# Accounts Serializer

This program is used to produce the secret `TEST_ACCOUNTS` used by the [chatgpt-scraper](https://github.com/daily-coding-problem/chatgpt-scraper). `TEST_ACCOUNTS` is a dictionary of the form:

```json
{
	"test@company.com": {
		"password": "some password",
		"secret": "some secret"
	}
}
```

## How to obtain the `secret` for a given `email`

The `secret` is obtained from the totp.Account URL which comes from the QR code generated by w3id when setting up 2FA.

For example: `otpauth://totp/Example:alice@google.com?secret=JBSWY3DPEHPK3PXP&issuer=Example`

The `secret` is the value of the `secret` query parameter.

E.g., `JBSWY3DPEHPK3PXP` in the above example.

## Configuration

Configuration is done via environment variables. Please see the [.env.example](.env.example) file for a list of all available variables.

## Requirements

- Python 3.11+
- Poetry

## Installation

```shell
poetry install
```

## Usage

```shell
poetry run python accounts_serializer.py --emails email1@email.com email2@email.com --passwords pass1 pass2 --secrets secret1 secret2
```

## Docker

```shell
docker build -t accounts_serializer .
docker run --rm --env-file .env accounts_serializer --help
docker run --rm --env-file .env accounts_serializer --emails email1 email2 --passwords pass1 pass2 --secrets secret1 secret2
```
